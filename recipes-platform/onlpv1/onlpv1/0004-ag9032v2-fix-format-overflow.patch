From 5d5b7a8d90703ec7d35ce3f97e8bd172e28b06eb Mon Sep 17 00:00:00 2001
From: Tobias Jungel <tobias.jungel@bisdn.de>
Date: Wed, 10 Apr 2019 13:42:10 +0200
Subject: [PATCH 04/12] ag9032v2: fix format-overflow

---
 .../onlp/builds/src/module/src/platform_lib.c                 | 4 ++--
 .../x86-64-delta-ag9032v2/onlp/builds/src/module/src/psui.c   | 2 +-
 .../x86-64-delta-ag9032v2/onlp/builds/src/module/src/sfpi.c   | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/platform_lib.c b/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/platform_lib.c
index 330bb42f..824e008b 100644
--- a/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/platform_lib.c
+++ b/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/platform_lib.c
@@ -42,7 +42,7 @@ int dni_get_bmc_data(char *device_name, UINT4 *num, UINT4 multiplier)
         pclose(fpRead);
                 return ONLP_STATUS_E_GENERIC;
     }
-    fgets(Buf, lenth , fpRead);
+    (void)!fgets(Buf, lenth , fpRead);
     num_f = atof( Buf );
     *num = num_f * multiplier;
     pclose(fpRead);
@@ -136,4 +136,4 @@ dni_psui_eeprom_info_get(char *r_data, int psu_id, int psu_reg)
         rv = ONLP_STATUS_E_INVALID;
     }
     return rv;
-}
\ No newline at end of file
+}
diff --git a/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/psui.c b/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/psui.c
index 8a3da417..d0dc7824 100644
--- a/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/psui.c
+++ b/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/psui.c
@@ -62,7 +62,7 @@ onlp_psui_info_get(onlp_oid_t id, onlp_psu_info_t* info)
     UINT4 multiplier = 1000;
     UINT4 u4Data     = 0;
 
-    char device_name[10]  = {0};
+    char device_name[20]  = {0};
     char module_name[20]  = {0};
     char *module_name_ptr = module_name;
     
diff --git a/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/sfpi.c b/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/sfpi.c
index acfcd426..99decb4e 100644
--- a/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/sfpi.c
+++ b/packages/platforms/delta/x86-64/x86-64-delta-ag9032v2/onlp/builds/src/module/src/sfpi.c
@@ -217,7 +217,7 @@ onlp_sfpi_presence_bitmap_get(onlp_sfp_bitmap_t* dst)
     byte_get = onlp_i2c_readb(I2C_BUS_1, SWPLD_1_ADDR, SFP_PRESENT_4, ONLP_I2C_F_TENBIT);
     if(byte_get < 0)return ONLP_STATUS_E_GENERIC;
     bytes[3] = (~byte_get) & 0xFF;
-    sprintf(present_all_data + 9, "%x%c", byte_get, '\0');
+    sprintf(present_all_data + 9, "%x", byte_get);
 
     /* String split */
     r_byte = strtok(present_all_data, " ");
-- 
2.20.1

